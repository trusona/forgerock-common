buildscript {
  repositories {
    google()
    mavenCentral()
    jcenter()
  }

  dependencies {
    classpath "org.jfrog.buildinfo:build-info-extractor-gradle:4.8.1"
  }
}

group "com.trusona.integration"
version "1.3.0-SNAPSHOT"

apply plugin: "java"
apply plugin: "groovy"
apply plugin: "idea"
apply plugin: "maven"
apply plugin: "jacoco"
apply from: "publishing.gradle"
apply from: "build-extras.gradle"

dependencies {
  compile "com.trusona:trusona-sdk:3.5.2"
  compile "com.trusona.libs:trusona-client-java-sdk:2.4.1" // legacy SDK - SAD! :(

  compile "com.fasterxml.jackson.core:jackson-annotations:${jacksonVersion}"
  compile "org.apache.commons:commons-lang3:${commonsLang3Version}"
  compile "com.squareup.retrofit2:retrofit:${retrofit2Version}"

  compileOnly "org.forgerock.am:openam-shared:${forgerockVersion}"
  compileOnly "org.forgerock.am:openam-core:${forgerockVersion}"

  testCompile "org.forgerock.am:openam-shared:${forgerockVersion}"
  testCompile "org.forgerock.am:openam-core:${forgerockVersion}"

  testCompile "org.spockframework:spock-core:1.1-groovy-2.4"
  testCompile "org.codehaus.groovy:groovy:2.5.4"
  testCompile "org.slf4j:slf4j-simple:1.7.25"
  testCompile "org.objenesis:objenesis:3.0.1"
  testCompile "junit:junit:4.12"
}

assemble {
  dependsOn npm_install
  dependsOn npm_run_build
}

build {
  dependsOn assemble
}
